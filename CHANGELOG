# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [2.0.0] - 2025-08-13

### Added
- **Dual envelope modes**: Support for both pointwise maximum and wave sum envelopes via `--envelope` flag
- **Envelope-first animation**: Option to show envelope animation before individual waves with `--envelope-first`
- **Interactive pause control**: Pause at key animation points with `--pause` flag
- **Export capabilities**: Save animations as GIF or MP4 files with `--save` option
- **MP4 support**: High-quality video export with ffmpeg (30fps, 1800 bitrate)
- **Dynamic y-axis scaling**: Automatic calculation based on actual envelope values
- **Exit on completion**: Animation prompts for Enter key and exits cleanly after completion
- **Progress indicators**: Frame counter during save operations
- **Python 3.10+ type hints**: Updated to use modern Python type annotations

### Changed
- **Breaking**: Requires Python 3.10+ (previously 3.8+)
- **Breaking**: `save_gif` parameter replaced with `save_filename` in `run_animation()`
- **Breaking**: When using `--save`, animation only runs once (offscreen) instead of dual-pass
- Y-axis bounds now calculated from actual envelope data for accurate margins
- Envelope type can be selected via `--envelope` flag (max or sum)
- Animation exits automatically after completion with sys.exit()
- Save operations use explicit frame counts to prevent infinite loops
- Type hints modernized to Python 3.10+ style (list[] instead of List[], tuple[] instead of Tuple[])

### Fixed
- Y-axis margin now correctly applies to envelope sum calculations
- Canvas preservation during pause (no clearing on resume)
- Save operations properly complete with bounded frame counts
- GIF files now save correctly (non-zero size)
- MP4 save process no longer hangs indefinitely
- Animation completion detection works for both save and display modes

### Technical
- Removed legacy typing imports (Tuple, List, Union)
- Improved docstring coverage for all functions
- Better error handling for ffmpeg availability
- Added `save_count` parameter to prevent unbounded frame generation
- Implemented `_saving` flag to differentiate save vs display behavior
- Uses sys.exit() for clean program termination

## [1.0.0] - 2025-08-10

### Added
- Initial release of WaveAnim
- Real-time animated sine wave generation
- Pointwise maximum envelope tracing
- Command-line interface with full parameter control
- Programmatic API for custom integrations
- Dark theme with colorful wave visualization
- Comprehensive type hints throughout codebase
- Full documentation with docstrings
- Support for customizable amplitude and frequency ranges
- Configurable y-axis margins
- Animation speed control
- GIF export functionality

### Features
- Progressive wave drawing with thick/thin line transitions
- HSV-based color distribution for visual clarity
- Matplotlib-based smooth animations
- Error handling and input validation
- Reproducible results with seeded random generation

### Technical
- Python 3.8+ compatibility
- NumPy and matplotlib dependencies
- Type-safe implementation with mypy support
- Modular class-based architecture
- Clean separation of concerns

[Unreleased]: https://github.com/FNNDSC/waveAnim/compare/v2.0.0...HEAD
[2.0.0]: https://github.com/FNNDSC/waveAnim/compare/v1.0.0...v2.0.0
[1.0.0]: https://github.com/FNNDSC/waveAnim/releases/tag/v1.0.0
